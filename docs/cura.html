<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Cura data | Gauquelin5</title>
    <link href="static/gauquelin5.css" rel="stylesheet" type="text/css">
    <meta name="description" content="Main issues that should be addressed to build a better version of cura.free.fr data">
    <meta name="robots" content="index,follow">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.rights" content="Creative commons by-sa 4.0">
    <meta name="dcterms.rightsHolder" content="Thierry Graff">
    <meta name="dcterms.dateCopyrighted" content="2019">
    <!-- 
    tigsite:
        history: 2019-04-01 17:28:25+02:00, Thierry Graff : Creation
    -->
</head>

<body>
<div class="container">

<div class="main">

<a name="topage"></a>
<nav class="prevnext">
    <a class="topage" rel="" href="#topage">&#10148;</a>
    <a class="top" href="index.html">&uarr;</a>
    <a class="prev" rel="prev" href="output-format.html">&larr;</a>
    <a class="next" rel="next" href="cura-A.html">&rarr;</a>                                                                        
</nav>

<header>
<h1>Cura data</h1>
<div class="intro">
Gauquelin5 program handles a subset of the data published on <a href="http://cura.free.fr/gauq/17archg.html">cura.free.fr</a> : only persons with known names (famous persons).
<br>The code working on Cura data is located in <code>src/commands/cura/</code>.
</div>
</header>

<article>
<nav class="toc">
    <ul>
        <li>
            <a href="#download-cura-data">Download cura data</a>
        </li>
        <li>
            <a href="#working-on-cura-data">Working on cura data</a>
        </li>
        <li>
            <a href="#raw2csv">raw2csv</a>
        </li>
        <li>
            <a href="#tweak2csv">tweak2csv</a>
        </li>
        <li>
            <a href="#other-transformations">Other transformations</a>
        </li>
        <li>
            <a href="#export">export</a>
        </li>
    </ul>
</nav>



<!-- ********************************************************************************* -->
<h2>Cura data with names</h2>

Comparison between numbers claimed on Cura web site and numbers found by g5 :

<table class="count-A wikitable margin">
<tr><th>File</th><th>Cura claims</th><th>N <sub>Cura</sub></th><th>N <sub>g5</sub></th><th>&Delta;</th><th>Explanation</th></tr>
<tr><td>A1</td><td>2088 sports champions</td><td class="right">2 088</td><td class="right bold">2 087</td><td>1</td><td>Y, see <a href="http://cura.free.fr/gauq/902gdA1y.html">Cura web site</a></td></tr>
<tr><td>A2</td><td>3644 scientists and medical doctors</td><td class="right">3 644</td><td class="right bold">3 643</td><td>1</td><td>Y, see <a href="http://cura.free.fr/gauq/902gdA2y.html">Cura web site</a></td></tr>
<tr><td>A3</td><td>3047 military men</td><td class="right">3 047</td><td class="right bold">3 046</td><td>1</td><td>N</td></tr>
<tr><td>A4</td><td>1473 painters and 1249 French musicians</td><td class="right">2 722</td><td class="right bold">2 720</td><td>2</td><td>N</td></tr>
<tr><td>A5</td><td>1409 actors and 1003 politicians</td><td class="right">2 412</td><td class="right bold">2 410</td><td>2</td><td>N</td></tr>
<tr><td>A6</td><td>2027 writers and journalists</td><td class="right">2 027</td><td class="right bold">2 026</td><td>1</td><td>N</td></tr>
<tr><td>D6</td><td>450 New famous European Sports Champions</td><td class="right">450</td><td class="right bold">449</td><td>1</td><td>N</td></tr>
<tr><td>D10</td><td>1398 data of successful Americans</td><td class="right">1 398</td><td class="right bold">1 396</td><td>2</td><td>N</td></tr>
<tr><td>E1</td><td>2154 French Physicians, Military Men and Executives</td><td class="right">2 154</td><td class="right bold">2 153</td><td>1</td><td>N</td></tr>
<tr><td>E3</td><td>1540 New French Writers, Artists, Actors, Politicians and Journalists</td><td class="right">1 540</td><td class="right bold">1 539</td><td>1</td><td>N</td></tr>
<tr class="big2"><td colspan="2" class="right">TOTAL</td><td class="right">21 482</td><td class="right bold">21 469</td></tr>
</table>

&Delta; = N <sub>Cura</sub> - N <sub>g5</sub>, difference between number of records claimed by Cura and and numbers found by g5.
<br>Most of these differences have no known explanation, it looks like mistakes on Cura web site.

<!-- ********************************************************************************* -->
<h2><a name="download-cura-data">Download cura data</a></h2>

Html pages of <a href="http://cura.free.fr/gauq/17archg.html">cura.free.fr</a> must be downloaded on your local machine, in a directory specified by <code>1-cura-raw</code> in <code>config.yml</code>.
<br>The default value for this directory is <code>data/1-raw/cura.free.fr/</code>
<br>The following files must be stored in this directory :
<a class="padding-right" href="http://cura.free.fr/gauq/902gdA1y.html">902gdA1y.html</a>
<a class="padding-right" href="http://cura.free.fr/gauq/902gdA2y.html">902gdA2y.html</a>
<a class="padding-right" href="http://cura.free.fr/gauq/902gdA3y.html">902gdA3y.html</a>
<a class="padding-right" href="http://cura.free.fr/gauq/902gdA4y.html">902gdA4y.html</a>
<a class="padding-right" href="http://cura.free.fr/gauq/902gdA5y.html">902gdA5y.html</a>
<a class="padding-right" href="http://cura.free.fr/gauq/902gdA6y.html">902gdA6y.html</a>
<a class="padding-right" href="http://cura.free.fr/gauq/902gdD6.html">902gdD6.html</a>
<a class="padding-right" href="http://cura.free.fr/gauq/902gdD10.html">902gdD10.html</a>
<a class="padding-right" href="http://cura.free.fr/gauq/902gdE1.html">902gdE1.html</a>
<a class="padding-right" href="http://cura.free.fr/gauq/902gdE3.html">902gdE3.html</a>
<a class="padding-right" href="http://cura.free.fr/gauq/902gdN.html">902gdN.html</a>
<br>
<br>The html files must be stored with the same name as in cura.free.fr ; local files should look like this :
<pre>
data/1-raw/cura.free.fr
    ├── 902gdA1y.html
    ├── 902gdA2y.html
    ├── 902gdA3y.html
    ├── 902gdA4y.html
    ├── 902gdA5y.html
    ├── 902gdA6y.html
    ├── 902gdD10.html
    ├── 902gdD6.html
    ├── 902gdE1.html
    ├── 902gdE3.html
    └── 902gdN.html
</pre>

Note : the following instruction downloads all data files of cura.free.fr in current directory, but g5 doesn't need all files.
<pre>
wget --mirror --wait 1 --page-requisites --cut-dirs=1 --relative --no-parent -A '902gd*.html' --no-host-directories http://cura.free.fr/gauq/17archg.html
</pre>


<!-- ********************************************************************************* -->
<h2><a name="working-on-cura-data">Working on cura data</a></h2>

If you type :
<pre>php run-g5.php cura</pre>
the program tells you the possible values of datafiles for cura dataset : 
<pre>Possible datafiles for dataset cura : all, A, A1, A2, A3, A4, A5, A6, D6, D10, E1, E3</pre>

<ul>
    <li><code>all</code> will operate on all cura files.</li>
    <li><code>A</code> will operate on all files of serie A.</li>
    <li>Other values will operate on a single file.</li>
</ul>

<br>The precise list of transformations depends on the concerned file, but for all files, 
<br>- the first transformation is <code>raw2csv</code>,
<br>- the second transformation is <code>tweak2csv</code>
<br>- the last transformation is <code>export</code> (see below).
<br>
<br>
For all datafiles, a transformation called <code>all</code> will perform all the transformations on a given file.
<br>For example,
<pre>php run-g5.php cura A4 all</pre>
executes the available transformations on file A4, <code>raw2csv</code> and <code>export</code> included.


<br>
<br>One command performs all the steps for all cura datafiles :
<pre>php run-g5.php cura all run</pre>


<!-- ********************************************************************************* -->
<h2><a name="raw2csv">raw2csv</a></h2>
For all cura datafiles, the first transformation is <code>raw2csv</code>
<br>It extracts data from html files and produces csv files.
<br>This step uses two entries of <code>config.yml</code> :
<br>- It takes html pages located in a directory specified by entry <code>1-cura-raw/</code> 
<br>- It produces csv files located in a directory specified by entry <code>5-cura-csv/</code>
<br>
<br>This is done for example with the command :
<pre>php run-g5.php cura D6 raw2csv</pre>

During this step, some corrections are applied to the data.
<br>Some corrections are common to all files : 
<ul>
    <li>
        Country codes are converted to ISO 3166.
    </li>
    <li>
        Dates and times are merged to be stored in ISO 8601 format <code>YYYY-MM-DD HH:MM:SSsHH:MM</code>.
        <br>For example <code>1906-02-06 14:00:00-01:00</code> ; the string <code>-01:00</code> represents the timezone offset.
        <br>In this step, dates are not modified ; if needed, legal time restoration is done in a separate step.
    </li>
    <li>
        Longitudes and latitudes are expressed in decimal degrees.
    </li>
    <li>
        Occupation codes are computed.
    </li>
    <li>
        Family and given names are computed when possible.
    </li>
</ul>

<!-- ********************************************************************************* -->
<h2><a name="tweak2csv">tweak2csv</a></h2>
This is done after <code>raw2csv</code>, see <a href="tweak2csv.html">page tweak2csv</a>.
<br>Used for A2 to include errors shown by comparison with <a href="newalch-muller1083.html">Müller's file 1083MED</a>.


<!-- ********************************************************************************* -->
<h2><a name="other-transformations">Other transformations</a></h2>

Other transformations (between <code>raw2csv</code> and <code>export</code>) modify the files located in <code>5-cura-csv/</code>.
<br>
<br>Precise transformations are described in the following pages :
<ul class="spaced naked margin-top big2">
    <li><a href="cura-A.html">Serie A</a></li>
    <li><a href="cura-D6.html">File D6</a></li>
    <li><a href="cura-D10.html">File D10</a></li>
    <li><a href="cura-E1-E3.html">Files E1 and E3</a></li>
</ul>

<!-- ********************************************************************************* -->
<h2><a name="export">export</a></h2>
For all cura files, the last step is to copy the csv file in <code>5-cura-csv/</code> to the directory containing downloadable files : <code>9-cura/</code>.
<br>This is done by step <code>export</code>. This step only copies the file from a directory to an other, and does nothing else.


</article>
</div><!-- end class="main" -->


<!-- ************************************* -->
<aside class="left">                                                                                                                                              
<ul>
    <li class="bold big1"><a href="index.html">g5 Doc</a></li>
    <li class="bold big1"><a href="https://github.com/tig12/gauquelin5">g5 code</a></li>
    <li class="bold big1"><a href="https://larzac.info/gauquelin5">Download results</a></li>
    
    <li><a href="organisation.html">Organisation</a></li>
    <li><a href="usage.html">Program usage</a></li>
    <li><a href="output-format.html">Output format</a></li>
    
    <li>
        <span class="big1">1 - Restore</span>
        <ul>
        
            <li><a href="historical-tests.html"><b>Historical tests</b></a></li>
            
            <li><a href="cura.html">cura.free.fr</a></li>
            
            <li>
                <ul>
                    <a href="cura-A.html">A</a>
                    <a href="cura-D6.html">D6</a>
                    <a href="cura-D10.html">D10</a>
                    <a href="cura-E1-E3.html">E1 E3</a>
                <li><a href="cura-results.html">Results</a></li>
                </ul>
            </li>
            
            <li>
                <a href="newalch.html">newalchemypress.com</a>
                <ul>
                    <li><a href="newalch-ertel4391.html">Ertel 4391 athletes</a></li>
                    <li><a href="newalch-muller1083.html">Müller 1083 physicians</a></li>
                    <li><a href="newalch-muller402.html">Müller 402 writers</a></li>
                </ul>
            </li>
            
            
            <li>
                <a href="g55.html">Gauquelin 1955</a>
                <ul>
                    <li><a href="g55-restore.html">Restoration</a></li>
                    <li><a href="g55-curadiff.html">Differences with Cura</a></li>
                </ul>
            </li>
            
            <li><a href="comite-para.html">Comité Para 1976</a></li>
            <li><a href="csicop.html">CSICOP 1979</a></li>
            <li><a href="cfepp.html">CFEPP 1996</a></li>
            <!-- <li><a href="todo-data.html">Data TODO</a></li> -->
        </ul>
    </li>
    
    <li>
        <span class="big1">2 - Build new data</span>
        <ul>
            <li><a href="full.html">7-full</a></li>                                       
            <li>
                <a href="db5.html">G5 database db5</a>
                <ul>
                    <li><a href="db5-source.html">Source</a></li>
                    <li><a href="db5-person.html">Person</a></li>
                    <li><a href="db5-group.html">Group</a></li>
                    <li><a href="db5-api.html">API</a></li>
                </ul>
            </li>
            <li><a href="check.html">Check</a></li>
            <li><a href="acts.html">Acts</a></li>
            <li><a href="wikidata.html">Wikidata.org</a></li>
            <li><a href="geonames.html">Geonames.org</a></li>
        </ul>
    </li>
        
    <li>
        <span class="big1">3 - Eminence</span>
        <ul>
            <li><a href="eminence.html">Eminence ranking</a></li>
            <!-- 
            <li><a href="maths.html">Mathemeticians</a></li>
            -->
        </ul>
    </li>
    
    <li><a href="code-details.html">Code details</a></li>
    <li><a href="time.html">Expressing time</a></li>
    <li><a href="tweak2csv.html">tweak2csv</a></li>
    
    <!-- <li><a href="next.html">Next</a></li> -->
    
    <!-- <li><a href="questions.html">Questions</a></li> -->

</ul>
</aside>

</div><!-- end class="container" -->

</body>
</html>
<!-- ************************************* -->
<!-- ********************************************************************************* -->
