<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Data model | Gauquelin5</title>
    <link href="static/gauquelin5.css" rel="stylesheet" type="text/css">
    <meta name="description" content="">
    <meta name="robots" content="index,follow">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.rights" content="Creative commons by-sa 4.0">
    <meta name="dcterms.rightsHolder" content="Thierry Graff">
    <meta name="dcterms.dateCopyrighted" content="2019">
    <!-- 
    tigsite:
        history: 2019-12-21 00:37:21+01:00, Thierry Graff : Creation
    -->
</head>

<body>
<div class="container">

<div class="main">

<nav class="prevnext">
    <a class="top" href="index.html">&uarr;</a>
    <a class="prev" rel="prev" href="full.html">&larr;</a>
    <a class="next" rel="next" href="acts.html">&rarr;</a>
</nav>

<header>
<h1>Data model</h1>
<div class="intro">
<code>7-full/</code> contains these notions : source, person, group.
</div>
</header>

<article>

<img class="border margin padding" src="img/g5-db-model.svg" alt="">

<div class="small8">
Read :
<br>
<ul class="naked border inline-block padding05 margin05">
    <li>
        1 source is related to 0-n persons
        <br>0 => a source can exist without being related to any person.
    </li>
    <li class="padding-top05">
        1 person is related to 1-n sources
        <br>1 => a person cannot exist in the database without being related to a source.
    </li>
</ul>
</div>
<!-- 
<img class="margin padding border" src="img/data-model.jpg" alt="">
-->

<ul class="spaced">
    <li>
        <div class="bold">Source</div>                          
        Information sources, origin of the data manipulated by g5.
    </li>
    <li>
        <div class="bold">Person</div>                          
        Famous people who are studied.
    </li>
    <li>
        <div class="bold">Group</div>
        A set of persons
        <br>
    </li>
    
</ul>


<!-- ********************************************************************************* -->
<h2>Syntax</h2>
The definitions of the fields are expressed in yaml files located with the source code of the model
<pre>
src/model/
    ├── Group.php
    ├── Group.yml
    ├── Person.php
    ├── Person.yml
    ├── Source.php
    └── Source.yml
</pre>

File <code>Person.yml</code> contains an empty person with all its fields empty.
<br>This provides to the code a precise definition of the entities, the description of a new type.

<!-- ************************************* -->
<h3>Common fields</h3>
<ul>
    <li>
        <div class="bold">uid</div>
        Unique identifier. Must be unique within g5 db.
        <br>ex: 
        <pre class="normal">
persons/1876/05/29/parmentier-andre
groups/datasets/cura/A1
sources/web/cura/A1</pre>
    </li>
    
    <li>
        <div class="bold">file</div>
        Path to the file where the entity is stored.
        <br><code>uid</code> is used to build <code>file</code>.
        <br>ex:
        <pre class="normal">
persons/1876/05/29/parmentier-andre/parmentier-andre-1876-05-29.yml
groups/datasets/cura/A1.txt
sources/web/cura/A1.yml</pre>
    </li>
    The relation between <code>uid</code> and <code>file</code> is specific to each type of entity.
</ul>


<!-- ********************************************************************************* -->
<h2>Person</h2>

<code>Person.yml</code> gives the full definition :
<textarea readonly class="block margin padding" rows="55" cols="70">
uid: 
slug:
dir: 
file:

trust:

ids: []

name:
  usual:
  given:
  family:
  spouse:
  official: # As written in the birth certificate
    family:
    given:
  nobility:
  fame: # stage, scene
  nicknames: []
  alternative: []

# occupation codes
occus: []

birth:
  date:     # exact date (day and hour) of the birth certificate
  tz:       # timezone offset
  date-ut:  # for dates like cura A
  place:
    name:
    c2:
    c3:
    cy:
    geoid:
    lg:
    lat:
      
death:
  date:     # exact date of the birth certificate
  tz:       # timezone offset
  date-ut:  # for dates like cura A
  place:
    name:
    c2:
    c3:
    cy:
    geoid:
    lg:
    lat:
                                                                                                                                                         
sources: []

raw: []
  
history: []
</textarea>



<!-- ********************************************************************************* -->
<h2>Source</h2>
Source:
<ul class="margin-bottom">
    <li>id</li>
    <li>parents</li>
    <li>data</li>
    <li>persons</li>
    <li>groups</li>
</ul>

Sources are built by humans filling yaml files in <code>7-full/sources/</code> and generated by program.


<!-- ********************************************************************************* -->
<h2>Secondary notions</h2>

<!-- ************************************* -->
<h3>Data</h3>
One data is defined as a set of key-value pairs.
<br>Field name => field value
<textarea class="block margin05" cols="20" rows="8">YEA: "1873"
MON: "12"
DAY: "15"
PRO: S
NUM: "1"
COU: F
H: "15"
MN: "59"
SEC: "40"
TZ: "0"
LAT: 43N14
LON: 0E 5
COD: "65"
CITY: TARBES
FNAME: Abadie
GNAME: Joseph</textarea>
(example from file A2)
<br>
<br>Precise data like that are related to 1 source and participate to build 1 person.

    <!-- 
    <li>
    </li>
    <li>
        <div class="big2 bold">Documents</div>
        <ul>
            <li>
                <div class="bold">Source</div>
                Information source
                <br>Can be a file from the web, a book, review, result of a program execution...
                <br>To follow the construction of a data, many sources are involved.
                <br>Ex for file A1 :
                <ul class="simple">
                    <li>Original documents gathered by Gauquelin</li>
                    <li>Lists established by Gauquelin</li>
                    <li>Book published by Gauquelin in 1970</li>
                    <li>First computerized version</li>
                    <li>Transformations done on the data, from Gauquelin to editorial process of cura.free.fr.</li>
                    <li>Transformations done by g5 to produce downloadable file (and possible bugs).</li>
                </ul>
            </li>
            <li>
                <div class="bold">Act</div>
                Acts are scans of the original documents.
                <br>Mainly Birth certificates - actes de naissance, décès, mariages.
                <br>Each act is accompanied by a yaml file containing its transcription, <a href="acts.html#example">see example</a>
            </li>
        </ul>
    </li>
    -->



<!-- ************************************* -->
<!-- ********************************************************************************* -->
</article>
</div><!-- end class="main" -->

<!-- ************************************* -->
<aside class="left">                                                                                                                                              
<ul>
    <li class="bold big1"><a href="index.html">g5 Doc</a></li>
    <li class="bold big1"><a href="https://github.com/tig12/gauquelin5">g5 code</a></li>
    <li><a href="organisation.html">Organisation</a></li>
    <li><a href="usage.html">Program usage</a></li>
    <li><a href="output-format.html">Output format</a></li>
    
    <li>
        <span class="big1">1 - Restore</span>
        <ul>
        
            <li><a href="historical-tests.html">Historical tests</a></li>
            
            <li><a href="cura.html">cura.free.fr</a></li>
            
            <li>
                <ul>
                    <a href="cura-A.html">A</a>
                    <a href="cura-D6.html">D6</a>
                    <a href="cura-D10.html">D10</a>
                    <a href="cura-E1-E3.html">E1 E3</a>
                <li><a href="cura-results.html">Results</a></li>
                </ul>
            </li>
            
            <li>
                <a href="newalch.html">newalchemypress.com</a>
                <ul>
                    <li><a href="newalch-ertel4391.html">Ertel 4391 SPO</a></li>
                    <li><a href="newalch-muller1083.html">Müller 1083 MED</a></li>
                </ul>
            </li>
            
            
            <li>
                <a href="g55.html">Gauquelin 1955</a>
                <ul>
                    <li><a href="g55-restore.html">Restoration</a></li>
                    <li><a href="g55-curadiff.html">Differences with Cura</a></li>
                </ul>
            </li>
            
            <li><a href="comite-para.html">Comité Para 1976</a></li>
            <li><a href="csicop.html">CSICOP 1979</a></li>
            <li><a href="cfepp.html">CFEPP 1996</a></li>
            <!-- <li><a href="todo-data.html">Data TODO</a></li> -->
        </ul>
    </li>
    
    <li>
        <span class="big1">2 - Build new data</span>
        <ul>
            <li><a href="full.html">7-full</a> - <a href="full-code.html">Code</a></li>
            <li><a href="data-model.html">Data model</a></li>
            <li><a href="acts.html">Acts</a></li>
            <li><a href="check.html">Check</a></li>
            <li><a href="merge.html">Merge</a></li>
            <li><a href="wikidata.html">Wikidata.org</a></li>
            <li><a href="geonames.html">Geonames.org</a></li>
        </ul>
    </li>
        
    <li>
        <span class="big1">3 - Eminence</span>
        <ul>
            <li><a href="eminence.html">Eminence ranking</a></li>
            <!-- 
            <li><a href="maths.html">Mathemeticians</a></li>
            -->
        </ul>
    </li>
    
    <li><a href="code-details.html">Code details</a></li>
    <li><a href="time.html">Expressing time</a></li>
    <li><a href="tweak2csv.html">tweak2csv</a></li>
    
    <!-- <li><a href="next.html">Next</a></li> -->
    
    <!-- <li><a href="questions.html">Questions</a></li> -->

    <li class="bold big1"><a href="https://larzac.info/gauquelin5">Download results</a></li>
    
</ul>
</aside>

</div><!-- end class="container" -->

</body>
</html>
<!-- ************************************* -->
<!-- ********************************************************************************* -->
