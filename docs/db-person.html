<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>G5 Person | Open Gauquelin database</title>
    <link rel="icon" type="image/png" href="img/g5.png">
    <link href="static/g5.css" rel="stylesheet" type="text/css">
    <meta name="description" content="">
    <meta name="robots" content="index,follow">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.rights" content="Creative commons by-sa 4.0">
    <meta name="dcterms.rightsHolder" content="Thierry Graff">
    <meta name="dcterms.dateCopyrighted" content="2019">
    <!-- 
    tigsite:
        history: 2021-09-16 21:28:10+02:00, Thierry Graff, Creation
    -->
</head>

<body>
<div class="container">

<div class="content">

<a name="topage"></a>
<nav class="prevnext">
    <a class="topage" rel="" href="#topage">&#10148;</a>
    <a class="top" href="index.html">&uarr;</a>
    <a class="prev" rel="prev" href="db.html">&larr;</a>
    <a class="next" rel="next" href="db-group.html">&rarr;</a>
</nav>

<main>
<header>
<h1>G5 Person</h1>
<div class="intro">
This page describes how the notion of person is handled in g5 database.
<br>The structure of a person is given by <a href="https://github.com/tig12/g5/blob/main/src/model/templates/Person.yml"><code>src/model/templates/Person.yml</code></a>. See this file for a precise description of the types inside jsonb fields.
</div>
</header>

<article>

<nav class="pagetoc" aria-label="Table of contents">
    <ul>
        <li>
            <a href="#1-person-ids">Person ids</a>
            <ul>
                <li>
                    <a href="#1-1-unique-ids">Unique ids</a>
                </li>
                <li>
                    <a href="#1-2-ids-in-sources">Ids in sources</a>
                </li>
                <li>
                    <a href="#1-3-partial-ids">Partial ids</a>
                </li>
            </ul>
        </li>
        <li>
            <a href="#2-build-history">Build history</a>
        </li>
        <li>
            <a href="#3-build-notes">Build notes</a>
        </li>
        <li>
            <a href="#4-person-name">Person name</a>
        </li>
        <li>
            <a href="#5-birth-and-death-dates">Birth and death dates</a>
        </li>
        <li>
            <a href="#6-links-with-other-entities">Links with other entities</a>
        </li>
    </ul>
</nav>

<br>Table definition is in <a href="https://github.com/tig12/g5/tree/main/src/model/db-create">src/model/db-create</a>

<pre>
create table person (
    id              serial primary key,
    slug            varchar(255) unique not null,
    ids_in_sources  jsonb not null,
    partial_ids     jsonb not null,
    name            jsonb not null,
    sex             char(1),
    birth           jsonb not null,
    death           jsonb not null,
    occus           jsonb not null,
    trust           char(1),
    acts            jsonb not null,
    history         jsonb not null,
    notes           jsonb not null
);
</pre>

Jsonb fields follow this rule: if a value is not knows, it is set to <code>null</code> (never empty string).

<!-- ********************************************************************************* -->
<h2 id="1-person-ids">Person ids</h2>

<!-- ************************************* -->
<h3 id="1-1-unique-ids">Unique ids</h3>

Every person of the database has 2 unique ids:
<ul class="spaced margin-top">
    <li>
        Person slug, its g5 unique id (see definition in page <a href="db.html#g5-unique-id">G5 database</a>) - a string like <code>abonneau-pierre-1854-01-10</code>.
        <br>These can be read by humans and are used to build the public URL of a person in <a href="https://opengauquelin.org">opengauquelin.org</a>.
    </li>
    <li>
        Id generated by the database (usual database id, <code>serial</code> in postgresql, equivalent of <code>autoincrement</code> in mysql or <code>row_id</code> in sqlite).
        <br>These are used by postgresql (the database management system) to link persons to other entities, like groups.
    </li>
</ul>

<!-- ************************************* -->
<h3 id="1-2-ids-in-sources">Ids in sources</h3>

Field <code>ids_in_sources</code> is a jsonb key value map giving the local ids of a person within its information sources.
<br>As a person is ALWAYS related to at least one information source, this field is never empty.

<br><br>For example, Georges Dumas is present in files A1, A6 and Müller's 1083 physicians:
<pre>select ids_in_sources from person where slug='dumas-georges-1866-03-06';</pre>
<pre>{
    "a2": "241",
    "a6": "282",
    "afd5": "325"
}</pre>

<!-- ************************************* -->
<h3 id="1-3-partial-ids">Partial ids</h3>

While field <code>ids_in_sources</code> represents the local ids of a person within precise information sources, the notion of partial id permits to identify the person within several meaningful contexts. These "meaningful contexts" are information sources of higher level (often parent sources of precise sources).
<br>One person can be associated to one or more partial ids.
<br>A given partial id concerns a subset of the database.


<br>The following partial ids are defined in g5 database :

<table class="wikitable margin">
    <thead><th>Source slug</th><th>Definition</th><th>Example</th></thead>
    <tr><td>lerrcp</td><td><a href="gauquelin.html#gauquelin-unique-id">Gauquelin LERRCP unique id</a></td><td>A3-543</td></tr>
    <tr><td>g55</td><td><a href="g55.html#g55-unique-id">Gauquelin 1955 unique id</a></td><td>02-284</td></tr>
    <tr><td>muller</td><td><a href="muller.html">Müller unique id</a></td><td>M2-163</td></tr>
    <tr><td>ertel</td><td><a href="ertel.html">Ertel unique id</a></td><td>ES-3548</td></tr>
    <tr><td>cpara</td><td><a href="comite-para.html">Comité Para unique id</a></td><td>CP-245</td></tr>
    <tr><td>csicop</td><td><a href="csicop.html#csicop-unique-id">CSICOP unique id</a></td><td>CS-504</td></tr>
    <tr><td>cfepp</td><td><a href="cfepp.html">CFEPP unique id</a></td><td>CF-546</td></tr>
    <tr><td>wd</td><td><a href="wikidata.html">Wikidata unique id</a></td><td>Q161247</td></tr>
</table>

<pre>select ids_partial from person where slug='dumas-georges-1866-03-06';</pre>
<pre>{
    "lerrcp": "A2-241",
    "muller": "M5-325"
}</pre>


<!-- ********************************************************************************* -->
<h2 id="2-build-history">Build history</h2>
Field <code>history</code> permits to track the initial raw values and the transformations done on a person data during the build process of the database.
<br>Each history entry contains the raw data used to modify the person, and the values that were retained to modify the person.
<br>To identify the errors in the original files, debug and check data.

<!-- ********************************************************************************* -->
<h2 id="3-build-notes">Build notes</h2>
Field <code>notes</code> contains notes written by g5 code during the build, for example:
<pre>
["CHECK: birth day - A6-868 1906-09-11 / M1writers 158 1903-09-11"]
["Death informations come from <a href="https://earlyaviators.com/eborn1.htm">https://earlyaviators.com/eborn1.htm</a>"]
["Value published in LERRCP corrected in APP"]
</pre>

<!-- ********************************************************************************* -->
<h2 id="4-person-name">Person name</h2>

The name of a person is modeled by this structure:
<pre>
name:
  full:             # string
  family:           # string
  given:            # string
  official:
    family:         # string
    given:          # string
  spouse: []        # array of strings
  alter: []         # array of strings
</pre>

<ul class="spaced">
    <li>
        <b><code>name.full</code></b>, <b><code>name.given</code></b>, <b><code>name.family</code></b> represent the name commonly used to designate a person.
        <br>These can be different from the official name.
        <br>It can be either the "real" name of the person, or a pseudonym.
        <br>Rules:
        <ul class="margin-top0">
            <li>
                <code>name.given</code> and <code>name.family</code> are either both filled or both null.
            </li>
            <li>
                If <code>name.full</code> is filled, then both <code>name.given</code> and <code>name.family</code> are null.
            </li>
            <li>
                The rule to build the name of a person is : if <code>name.full</code> is not empty, it is used.
                <br>Else the concatenation of <code>name.given</code> and <code>name.family</code> is used.
            </li>
            <li>For noble persons, the nobiliary particle is contained in <code>name.family</code>.</li>
        </ul>
        
    </li>
    <li>
        <code><b>name.official</b></code> represent the <i>exact</i> spelling of the name, as written in the birth certificate.
        <br>An important rule is: these fields are filled only if they differ from the common fields.
        <br>If the person has several given names, <code>name.official.given</code> contains them all.
        <br>Field <code>name.official.full</code> is used to transcribe acts where the distinction between family and given names is to difficult.
    </li>
    <li>
        <code><b>name.spouse</b></code> : array of spouse names (in general, used for married women). This field is informative only ; if the person is known using her spouse name, this information must be repeated in field <code>name.family</code>.
    </li>
    <li>
        <code><b>name.alter</b></code>: Array of alternative names.
    </li>
</ul>

<!-- ************************************* -->
<h3>Examples</h3>

<ul class="spaced">

    <li>
        <div class="bold">Most current case</div>
<pre>
name:
  given: Elie
  family: Cartan
  official:         
    given: Elie Joseph
</pre>
        This person is known as "Elie Cartan".
        <br>The official family name is the same as the common family name, so the information is not repeated. in the <code>official.name</code> field.
        <br>The birth certificate contains several given names. As they differ from the common given name, the field <code>official.given</code> is filled.
    </li>
    
    <li>
        <div class="bold"><code>name.family</code> differ from <code>name.official.family</code></div>
<pre>
name:
  family: Calvé
  given: Emma
  official:
    family: Calvet
    given: Rosa Noémie Emma
</pre>
        This person is known as "Emma Calvé".
        <br>Here, both given and family names are different from the birth certificate, so both are filled.
    </li>
    
    <li>
        <div class="bold">Usage of <code>name.full</code></div>
<pre>
name:
  full: Fernandel
  official:
    family: Constantin
    given: Fernand Joseph Désiré
</pre>
        This person is known as "Fernandel".
        <br>The fields <code>name.full</code> is used, but the fields <code>name.family</code> and <code>name.given</code> are not used.
    </li>
    
    <li>
        <div class="bold">Usage of <code>name.alter</code></div>
<pre>
name:
  family: Vian
  given: Boris
  official:
    given: Boris Paul
  alter:
    - Vernon Sullivan
    - Bison Ravi
    - Brisavion
</pre>
        This person is known as "Boris Vian", and he published books using various pseudonyms, stored in field <code>alter</code>.
    </li>
    
    <li>
        <div class="bold">Usage of <code>name.spouse</code></div>
<pre>
name:
  family: Choquet-Bruhat
  given: Yvonne
  official:
    family: Bruhat
    given: Yvonne, Suzanne, Marie-Louise
  spouse:
    - Fourès
    - Choquet
</pre>
        This person is known as "Yvonne Choquet-Bruhat".
        <br>She was married twice, which is indicated in the field <code>name.spouse</code>.
    </li>

</ul>


<!-- ********************************************************************************* -->
<h2 id="5-birth-and-death-dates">Birth and death dates</h2>
In database, stored in the fields <code>birth</code> and <code>death</code> of a Person.
<br>These fields contain a json string with this structure:
<pre>
{
    "date": "1891-07-18 08:00",
    "date-ut": "1891-07-18 07:51",
    "tzo": "+00:09:21",
    "notime": null,
    "lmt": null,
    "place": {
        "c1": null,
        "c2": "33",
        "c3": "",
        "cy": "FR",
        "lg": -0.5805,
        "lat": 44.84044,
        "name": "Bordeaux",
        "geoid": 3031582
    }
}
</pre>

Note the redundant information, as <code>date-ut + tzo = date</code>

<br><br>The field <code>note</code> of person is a json string used to store information about the person.

<br>Field <code>notes.tzo</code> is used to report timezone computation.
<br>
<pre class="inline-block">
{
    "tzo": {
        "err": "IT1 End of WW2",
        "trust": 0
    }
}
</pre>
<pre class="inline-block">
{
    "tzo": {
        "err": "IT1 End of WW2",
        "trust": 0
    }
}
</pre>

<!-- ********************************************************************************* -->
<h2 id="6-links-with-other-entities">Links with other entities</h2>
<div class="todo">TODO</div>



</article>
</main>
</div><!-- end class="content" -->

<!-- ************************************* -->
<aside class="left">
<nav>
<ul>
    <li class="bold big1"><a href="index.html">Home</a></li>
    <li class="bold big1"><a href="https://github.com/tig12/g5">Code repository</a></li>
    <li class="bold big1"><a href="https://opengauquelin.org/downloads">Download results</a></li>
    
    <li><a href="organisation.html">Organisation</a></li>
    <li><a href="install.html">Installation</a></li>
    <li><a href="usage.html">Usage</a></li>
    <li>
        <a href="db.html">G5 database</a>
        <div class="padding-left2">
        <a href="db-person.html">Person</a>
        <a href="db-group.html">Group</a>
        <br>
        <a href="db-source.html">Source</a>
        <a href="db-occu.html">Occupation</a>
        </div>
    </li>
    
    <li>
        <span class="big1">1 - Restore</span>                            
        <ul>
        
            <li><a href="historical-tests.html"><b>List of historical tests</b></a></li>
            
            <li><a href="sources.html">Information sources</a></li>
            
            <li>
                <div class="bold"><a href="gauquelin.html">Gauquelin</a></div>
                <ul>
                    <li>
                        <a href="gauquelin-A.html">A</a>
                        <a href="gauquelin-D6.html">D6</a>
                        <a href="gauquelin-D10.html">D10</a>
                        <a href="gauquelin-E1-E3.html">E1 E3</a>
                    </li>
                    <li>
                        <a href="g55.html">Gauquelin 1955</a>
                    </li>
                </ul>
            </li>
            
            <li>
                <div class="bold"><a href="muller.html">Arno Müller</a></div>
                <ul>
                    <li><a href="muller1-402-writers.html">1991 - 402 writers</a></li>
                    <li><a href="muller2-612-men.html">1992 - 612 men</a></li>
                    <li><a href="muller3-234-women.html">1993 - 234 women</a></li>
                    <li><a href="muller4-1145-dynasties.html">1993 - 1145 dynasties</a></li>
                    <li><a href="muller5-1083-medics.html">1994 - 1083 physicians</a></li>
                </ul>
            </li>
            
            <li>
                <div class="bold"><a href="ertel.html">Suitbert Ertel</a></div>
                <ul>
                    <li><a href="ertel-4391-sport.html">1988 - 4391 athletes</a></li>
                </ul>
            </li>
            
            <li>
                <div class="bold">Skeptics</div>
                <ul>
                    <li><a href="comite-para.html">1976 - Comité Para</a></li>
                    <li><a href="csicop.html">1979 - CSICOP</a></li>
                    <li><a href="cfepp.html">1996 - CFEPP</a></li>
                </ul>
            </li>
            
        </ul>
    </li>
    
    <li>
        <span class="big1">2 - Build new data</span>
        <ul>
            <li><a href="check.html">Check</a></li>
            <li><a href="acts.html">Acts</a></li>
            <li><a href="wikidata.html">Wikidata.org</a></li>
            <li>
                <a href="geonames.html">Geonames.org</a>
                <ul>
                    <li><a href="geonames-codes.html">C1 and C2 codes</a></li>
                </ul>
            </li>
            <li>
                <a href="anon-data.html">Anonymous data</a>
                <ul>
                    <li><a href="anon-gauq.html">1970-84 - Gauquelin</a></li>
                    <li><a href="anon-sachs.html">1979 - Gunter Sachs</a></li>
                    <li><a href="anon-castille.html">2000 - Didier Castille</a></li>
                    <li><a href="anon-voas.html">2007 - David Voas</a></li>
                </ul>
            </li>
        </ul>
    </li>
        
    <li>
        <span class="big1">3 - Eminence</span>
        <ul>
            <li><a href="eminence.html">Eminence ranking</a></li>
            <li><a href="eminence-math.html">Mathematicians</a></li>
        </ul>
    </li>
    
    <li>
        <span class="big1">Details</span>
        <ul>
            <li><a href="timezone.html">Timezone</a></li>
            <li><a href="code-details.html">Code details</a></li>
        </ul>
    </li>
    
    <!-- <li>
        <span class="big1"><a href="2025-g5.html">g5 2025</a></span>
    </li> -->
    
</ul>
</nav>
</aside>

</div><!-- end class="container" -->

</body>
</html>
