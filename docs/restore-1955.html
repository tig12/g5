<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Restore 1955 data | Gauquelin5</title>
    <link href="static/style.css" rel="stylesheet" type="text/css">
    <meta name="description" content="Detailed description of the operations done to restore 1955 Gauquelin groups">
    <meta name="robots" content="index,follow">
    <meta name="description" content="">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.rights" content="Creative commons by-sa 4.0">
    <meta name="dcterms.rightsHolder" content="Thierry Graff">
    <meta name="dcterms.dateCopyrighted" content="2018">
</head>

<body>

<nav class="prevnext">
    <a class="top" title="" href="index.html">&uarr;</a>
</nav>


<header>
<h1>Restoring 1955 groups
<div class="subtitle">Detailed steps</div>
</h1>
<div class="intro">
    This page details the actions that permit to reconstruct original 1955 Gauquelin groups from data retrieved from <a href="http://cura.free.fr/gauq/17archg.html">cura.free.fr</a>.
    <br>The process is documented using the reconstitution of the group "570 sportifs".
</div>
</header>


<article>


<br>The following diagram illustrates this process :

<img style="display:block; margin:1em;" src="img/serie-A1-sequence.jpg" alt="" />
    
<br>Absolute path to directories containing data (<code>1-cura-raw/</code> etc.) must be configured in <code>config.yml</code>.
<br>References to other files are relative to <code>gauquelin5</code> root directory (the directory containing <code>config.yml</code>, <code>src</code>, <code>run-gauquelin5.php</code>).

<style>
.steps>li{margin-bottom:1em;}
</style>

<ol class="steps">
    <li>
        <b>Store cura.free.fr data on a local machine</b> (by program).
        <br>This can be done using the script <code>tools/get-data</code>.
        <br>These data are stored somewhere on a local disk in a directory called <code>1-cura-raw/</code>.
    </li>
                                                                                                                                                
    <li>
        <b>Extract data from html pages to generate csv files</b> (by program).
        <br>This is done with the command <code>php run-gauquelin5.php A1 raw2exported</code>.
        <br>The code used to perform this step merges two lists from cura.free.fr data :
        <br>- One list contains the data with complete information (birth date, hour, place, country, profession) WITHOUT names.
        <br>- One list contains the names and only birth dates.
        <br>The merge process is done using birth dates, and this leads to cases that are not solvable by program ; human corrections (using Gauquelin original 1955 book) were necessary to write this code.
        <br>These data are stored in a directory called <code>2-cura-exported/</code> ; for serie A1, the file is <code>2-cura-exported/A1.csv</code>.
        <br>Other corrections are done during this step :
        <ul>
            <li>Convert country codes to ISO 3166.</li>
            <li>Restore detailed professions (this information is in Gauquelin book but not in cura data).</li>
            <li>Dates are converted to <code>YYYY-MM-DD</code> format.</li>
            <li>Hours are converted to <code>HH:MM:SS</code> format</li>
            <li>Express longitudes and latitudes in decimal degrees.</li>
        </ul>
        Human corrections that complete the program for this step are located in <code>src/SerieA.php</code>.
    </li>
    
    <li>
        <b>Edit the csv files to associate cura data to Gauquelin 1955 original groups</b> (by human).
        <br>File <code>2-cura-exported/A1.csv</code> is copied by a human to <code>3-cura-marked/A1.csv</code>.
        <br>A new column ("1955") is added to this file ; this column is filled by a human with a code identifying Gauquelin 1955 groups.
        <br>Lines coming from the group "570 sportifs" were marked "570SPO" (list of abbreviations used can be found in <code>src/Serie1955.php</code>).
    </li>
    
    <li>
        <b>Generate one file per original 1955 group</b> (by program).
        <br>Column "1955" of csv files located in <code>3-cura-marked/</code> is used to generate one file per 1955 group.
        <br>These files are generated in <code>4-1955-generated/</code> using the command <code>php run-gauquelin5 1955 modified21955</code>
        <br>This generates for example <code>4-1955-generated/570SPO.csv</code>
    </li>
    
    <li>
        <b>Copy these files to directory <code>5-1955-cura-corrected/</code></b> (by human).
    </li>
    
    <li>
        <b>Correct the files located in <code>5-1955-cura-corrected/</code></b> (by human).
        <br>Files in this directory are corrected by human.
        <br>The following columns are added : <code>FIRST_C; LAST_C; HOUR_C; DATE_C; PLACE_C; NOTES_C; PRO_C</code> (suffix <code>_C</code> stands for "corrected").
        <br>Corrections come from two sources :
        <ul>
            <li>
                Comparison between cura data and original 1955 book.
                <br>This leads to corrections on names, birth places, professions.
                <br><b>In particular, legal birth times are restored</b> ; cura data contain times 
            </li>
            <li>
                Matching geonames.org
            </li>
        </ul>
        <br>They are filled when cura data differ from Gauquelin book.
        <br>This step is easier when 2 persons are involved : one reading the book, the other correcting the file.
    </li>
    
    <li>
        <b>Generate 1955 groups</b> (by program) - not yet implemented
        <br>
    </li>
    
    
</ol>
    
</article> 

</body>
</html>








