<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Code details | Gauquelin5</title>
    <link href="static/gauquelin5.css" rel="stylesheet" type="text/css">
    <meta name="description" content="">
    <meta name="robots" content="index,follow">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.rights" content="Creative commons by-sa 4.0">
    <meta name="dcterms.rightsHolder" content="Thierry Graff">
    <meta name="dcterms.dateCopyrighted" content="2019">
    <!-- 
    tigsite:
        history: 2019-05-10 09:06:39+02:00, Thierry Graff : Creation
    -->
</head>

<body>
<div class="container">

<div class="content">

<a name="topage"></a>
<nav class="prevnext">
    <a class="topage" rel="" href="#topage">&#10148;</a>
    <a class="top" href="index.html">&uarr;</a>
</nav>

<main>
<header>
<h1>Code details</h1>
<div class="intro"></div>                                                                         
</header>

<article>

The code is namespaced ; main namespace name is <code>g5</code>.
<br>Code is PSR-4 (namespace hierarchy corresponds to directory hierarchy, like in java).
<br>Top-level namespace (<code>g5</code>) is located in <code>src/</code>.
<br>Another top-level namespace is used (<code>vendor</code>), located in <code>vendor/</code>.
<br>
<br>All transformations on data are done in namespace <code>g5\commands</code>.

<!-- ********************************************************************************* -->
<h2><a name="association-cli-executed-code">Association CLI - executed code</a></h2>

The command line interface (CLI) is handled by <code>run-g5.php</code>. To interpret the parameters typed by the user, a convention is used:
<ul>
    <li>The 3 first parameters are used to determine which class will be executed.</li>
    <li>These parameters correspond to the namespace hierarchy containing the executed class.</li>
    <li>The executed class must implement an interface, <code>g5\app\Command</code>, which impose to provide a method called <code>execute()</code>.</li>
    <li>Following parameters are passed in an array to the method <code>execute()</code></li>
</ul>

<br>Example:
<pre>php run-g5.php ertel sport look date</pre>
triggers the execution of
<pre>g5\commands\ertel\sport\look::execute(['date'])</pre>

<!-- ********************************************************************************* -->
<h2>One exception</h2>

This basic and rigid mechanism proved to be sufficient for most cases. It is convenient because it permits to add new commands which can be used directly without having to change a configuration, but couldn't fill the need to handle Gauquelin files of series A. For example, to have the ability to issue commands like
<br><code>php run-g5.php gauq A1 tmp2db</code>
<br><code>php run-g5.php gauq A2 tmp2db</code>
<br>would impose namespace <code>gauq</code> to have a sub-namespace <code>A1</code> and a sub-namespace <code>A2</code> etc.
<br>To handle this situation, a new convention was added:
<ul>
    <li>If namespace corresponding to parameter 1 contains a class implementing <code>Command</code> interface, the program transmits the control to this class.</li>
    <li>Otherwise, default mechanism is used.</li>
</ul>
This is for example the case of <code>g5\commands\gauq\GauqCommand</code>.

<br><br>Implementation of these conventions can be found in the namespace hierarchy, and in the code of class <code>g5\Run</code>

<br><br><a href="https://opengauquelin.org">test</a>
</article>
</main>
</div><!-- end class="content" -->


<!-- ************************************* -->
<aside class="left">
<nav>
<ul>
    <li class="bold big1"><a href="index.html">Home</a></li>
    <li class="bold big1"><a href="https://github.com/tig12/gauquelin5">Code repository</a></li>
    <li class="bold big1"><a href="https://g5.tig12.net/output">Download results</a></li>
    
    <li><a href="organisation.html">Organisation</a></li>
    <li><a href="install.html">Installation</a></li>
    <li><a href="usage.html">Usage</a></li>
    <li>
        <a href="db.html">G5 database</a>
        <div class="padding-left2">
        <a href="db-person.html">Person</a>
        <a href="db-group.html">Group</a>
        <br>
        <a href="db-source.html">Source</a>
        <a href="db-occu.html">Occupation</a>
        </div>
    </li>
    
    <li>
        <span class="big1">1 - Restore</span>                            
        <ul>
        
            <li><a href="historical-tests.html"><b>List of historical tests</b></a></li>
            
            <li><a href="sources.html">Information sources</a></li>
            
            <li>
                <div class="bold"><a href="gauquelin.html">Gauquelin</a></div>
                <ul>
                    <li>
                        <a href="gauquelin-A.html">A</a>
                        <a href="gauquelin-D6.html">D6</a>
                        <a href="gauquelin-D10.html">D10</a>
                        <a href="gauquelin-E1-E3.html">E1 E3</a>
                    </li>
                    <li>
                        <a href="g55.html">Gauquelin 1955</a>
                        <ul>
                            <li><a href="g55-lerrcp.html">Matching G55 - LERRCP</a></li>
                            <li><a href="g55-curadiff.html">Differences G55 - Cura5</a></li>
                            <li><a href="g55-884-priests.html">884 priests</a></li>
                            <li><a href="g55-361-painters.html">361 minor painters</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            
            <li>
                <div class="bold"><a href="muller.html">Arno Müller</a></div>
                <ul>
                    <li><a href="muller1-402-writers.html">1991 - 402 writers</a></li>
                    <li><a href="muller2-612-men.html">1992 - 612 men</a></li>
                    <li><a href="muller3-234-women.html">1993 - 234 women</a></li>
                    <li><a href="muller4-1145-dynasties.html">1993 - 1145 dynasties</a></li>
                    <li><a href="muller5-1083-medics.html">1994 - 1083 physicians</a></li>
                </ul>
            </li>
            
            <li>
                <div class="bold"><a href="ertel.html">Suitbert Ertel</a></div>
                <ul>
                    <li><a href="ertel-4391-sport.html">1988 - 4391 athletes</a></li>
                </ul>
            </li>
            
            <li>
                <div class="bold">Skeptics</div>
                <ul>
                    <li><a href="comite-para.html">1976 - Comité Para</a></li>
                    <li><a href="csicop.html">1979 - CSICOP</a></li>
                    <li><a href="cfepp.html">1996 - CFEPP</a></li>
                </ul>
            </li>
            
        </ul>
    </li>
    
    <li>
        <span class="big1">2 - Build new data</span>
        <ul>
            <li><a href="check.html">Check</a></li>
            <li><a href="acts.html">Acts</a></li>
            <li><a href="wikidata.html">Wikidata.org</a></li>
            <li>
                <a href="geonames.html">Geonames.org</a>
                <ul>
                    <li><a href="geonames-codes.html">C1 and C2 codes</a></li>
                </ul>
            </li>
        </ul>
    </li>
        
    <li>
        <span class="big1">3 - Eminence</span>
        <ul>
            <li><a href="eminence.html">Eminence ranking</a></li>
            <li><a href="eminence-math.html">Mathematicians</a></li>
        </ul>
    </li>
    
    <li>
        <span class="big1">Details</span>
        <ul>
            <li><a href="time.html">Time and timezone</a></li>
            <li><a href="code-details.html">Code details</a></li>
        </ul>
    </li>
    
</ul>
</nav>
</aside>

</div><!-- end class="container" -->

</body>
</html>
