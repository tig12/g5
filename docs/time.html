<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Time | Gauquelin5</title>
    <link href="static/gauquelin5.css" rel="stylesheet" type="text/css">
    <meta name="description" content="">
    <meta name="robots" content="index,follow">
    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.rights" content="Creative commons by-sa 4.0">
    <meta name="dcterms.rightsHolder" content="Thierry Graff">
    <meta name="dcterms.dateCopyrighted" content="2019">
    <!-- 
    tigsite:
        history: 2019-05-28 11:46:11+02:00, Thierry Graff : Creation
    -->
</head>

<body>
<div class="container">

<div class="main">

<nav class="prevnext">
    <a class="top" href="index.html">&uarr;</a>
</nav>

<header>
<h1>Expressing time</h1>
<div class="intro">
This page deals with a small but important detail : how to store times.
</div>
</header>

<article>
<nav class="toc">
    <ul>
        <li>
            <a href="#the-problem">The problem</a>
        </li>
        <li>
            <a href="#a-solution">A solution</a>
            <ul>
                <li><a href="#2-1-gauquelin5-integration">Gauquelin5 integration</a></li>
            </ul>
        </li>
    </ul>
</nav>





In this page, "legal time" means "the time that can be read on the birth certificate".

<!-- ********************************************************************************* -->
<h2><a name="the-problem">The problem</a></h2>

Gauquelin data available on cura.free.fr are sometimes given in a format that generates a problem.
<br>For example, record n° 798 of file A1 is given like this in cura.free.fr :
<pre>
YEA	MON	DAY	PRO	NUM	COU	H	MN	SEC	TZ	LAT	LON	COD	CITY		
(...)
1909	3	14	C	798	F	4	50	40	0	48N 0	4W 6	29	PLEYBEN
</pre>
This means that birth time is <code><b>04:50:40</b></code> and that timezone offset = 0.
<br>
<br>This can be compared with a scan of Gauquelins' LERRCP publication provided in cura.free.fr ; it shows that the same record was given in a different form :
<img class="margin05 border" src="img/A1-798.jpg" alt="Record A1-798 of Gauquelins' LERRCP">
This means that birth time is <code><b>05:00:00</b></code>, and timezone offset is not provided.
<br>
<br>Cura's value <code>04:50:40</code> is the result of a computation : legal time - timezone offset.
<br>This is coherent with the notice found in <a href="http://cura.free.fr/gauq/902gdA1y.html">page about file A1</a> :
<cite class="margin05">Birthtime is converted to standard time, either for zone 0 (= GMT) or -1 (= CET)</cite>

The way birth times are expressed in cura site adds information (the timezone offset). It's cool because the information can be directly used to compute birth chart. 
<br><b>But expressing times this way should be avoided</b> because two distinct informations are mixed in one field :
<ul>
    <li>The legal time, as it can be read in civil registries.</li>
    <li>The timezone offset.</li>
</ul>

It's a problem, because if one wants to check the data, it's impossible to check legal time without worrying about timezone offset.
<br>Doing like that generates a loss of information. If the data is not correct, does it come from an error on legal time or on timezone offset computation ?
<br>
<br>This problem occurs in all files of series A, B, F, NH, and in files D9a, D9b, D9c of cura.free.fr.
<br>
<br>Files D6, D10, E1, E3 contain legal time, so this problem does not occur. This advantage comes with an inconvenient : timezone offset is not provided, and needs to be computed to permit birth chart computation.


<!-- ********************************************************************************* -->
<h2><a name="a-solution">A solution</a></h2>

Using ISO 8601 format in the A1-798 example, CURA date would be expressed as <code><b>1909-03-14 04:50:40+00:00</b></code>
<br>Comparison between CURA and LERRCP permits to deduce that timezone offset is <code>9' 40''</code>. 
<br>
<br>A solution is to express this date as <code><b>1909-03-14 05:00+00:09:40</b></code>.
<br>The advantages are :
<ul>
    <li>Legal time is provided without any modification, allowing verification on civil registries.</li>
    <li>Timezone offset is given, allowing UT (Universal Time) computation.</li>
    <li>Birth time can be expressed without specifying seconds.</li>
</ul>

<br>This solution has an inconvenient : it obliges to express the timezone offset in the form <code>sHH:MM:SS</code> ; this form does not respect ISO 8601 standard, which does not permit to express seconds for the timezone offset (this point is not certain, as part of ISO 8601 standard is not available for free).

<!-- ************************************* -->
<h3><a name="2-1-gauquelin5-integration">Gauquelin5 integration</a></h3>
The choice was made to express timezone offset like above, even if this does not strictly respect ISO 8601.
<br>For the files concerned by current code (data of famous people), restoration only needs to be done for files of serie A.
<br>This is done by :
<pre>php run-g5.php cura A legalTime</pre>
This adds a column <code>DATE_C</code> (= date corrected) to the files.
<br>Current code performs restoration only for persons born in France, excluding all cases that can't be fixed by program without ambiguity (ambiguity comes from world wars 1 and 2, for parts of France that were invaded by Germany ; precise timezone offset depend on local conditions).
<br>
<br>Restoration rates are low :
<pre>
A1 : restored 1029 / 2087 dates (49.31 %)
A2 : restored 1614 / 3643 dates (44.3 %)
A3 : restored 1003 / 3046 dates (32.93 %)
A4 : restored 2333 / 2720 dates (85.77 %)
A5 : restored 882 / 2410 dates (36.6 %)
A6 : restored 776 / 2026 dates (38.3 %)
</pre>
This could be bettered by developing restoration for foreign countries.
</article>
</div><!-- end class="main" -->


<!-- ************************************* -->
<aside class="left">                                                                                                                                              
<ul>
    <li class="bold"><a href="https://github.com/tig12/gauquelin5">Gauquelin5 code</a></li>
    <li class="bold"><a href="index.html">Gauquelin5 Doc</a></li>
    <li><a href="organisation.html">Organisation</a></li>
    <li><a href="usage.html">Program usage</a></li>
    <li><a href="output-format.html">Output format</a></li>
    
    <li>
        <a href="cura.html">Cura data</a>                                                           
        <ul>
            <li>
                Html to csv
                <div class="padding-left">
                    <a href="cura-A.html">A</a>
                    <a href="cura-D6.html">D6</a>
                    <a href="cura-D10.html">D10</a>
                    <a href="cura-E1-E3.html">E1 E3</a>
                </div>
            </li>
            <li><a href="cura-results.html">Results</a></li>        
        </ul>
    </li>
    
    <li>
        Gauquelin 1955
        <ul>
            <li><a href="g55-restore.html">Restoration</a></li>
            <li><a href="g55-curadiff.html">Differences with Cura</a></li>
        </ul>
    </li>
    
    <li>
        <a href="newalch.html">Newalchemypress data</a>
        <ul>
            <li><a href="newalch-ertel4391.html">Ertel 4391</a></li>
            <li><a href="newalch-muller1083.html">Müller 1083</a></li>
        </ul>
    </li>
    
    <li><a href="time.html">Expressing time</a></li>
    
    <li><a href="geonames.html">Geonames.org</a></li>
    
    <li><a href="wikidata.html">Wikidata.org</a></li>
    
    <li><a href="code-details.html">Code details</a></li>
    
    <!-- <li><a href="next.html">Next</a></li> -->
    
    <!-- <li><a href="questions.html">Questions</a></li> -->
    
    <li>
        Doc
        <ul>
            <li><a href="historical-tests.html">Historical tests</a></li>
        </ul>
    </li>
    
    <li class="bold"><a href="https://larzac.info/gauquelin5">Download</a></li>
    
</ul>
</aside>

</div><!-- end class="container" -->

</body>
</html>
<!-- ************************************* -->
<!-- ********************************************************************************* -->
** -->
